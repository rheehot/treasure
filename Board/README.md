# 연관관계와 관계형 데이터베이스 설계

관계형 데이터베이스에서는 개체(entity) 간의 관계(relation)에 대해 고민한다.

관계형 데이터베이스에서는 일대일(1:1), 일대다(1:N), 다대일(N:1), 다대다(M:N)의 관계를 이용해서 

데이터가 서로 간에 어떻게 구성되었는지를 표현한다.

표현에서 가장 중요한 것은 PK, FK를 어떻게 설정해서 사용하는가에 대한 설정이다.

* 한 명의 회원은 여러 게시글을 작성할 수 있다.
* 하나의 게시글은 한 명의 회원에 의해서 작성된다.(x) -> 하나의 게시글은 한 명의 작성자만을 표시할 수 있다.

또 다른 예
* 하나의 게시글은 여러 개의 댓글을 가질 수 있다.
* 하나의 댓글은 하나의 게시글에 속한다.


# @ManyToOne과 Eager/Lazy loading

@ManyToOne의 경우에는 FK 쪽의 엔티티를 가져올 때 PK 쪽의 엔티티도 같이 가져온다.

fetch는 Lazy loading을 권장.

Eager = 즉시 로딩

즉시 로딩은 한 번에 연관관계가 있는 모든 엔티티를 가져오는 장점이 있다.

하지만, 여러 연관관계를 맺고 있거나, 연관관계가 복잡할수록 조인으로 인한 성능 저하가 있다.

Lazy loading = 지연 로딩

#연관관계에서는 @ToString()을 주의

@ToString()은 해당 클래스의 모든 멤버 변수를 출력하게 된다.

예를들면, Board객체의 @ToString()을 하면 write변수로 선언된 Member 객체 역시 출력해야 한다.

이런 문제로, 연관관계가 있는 엔티티 클래스의 경우 @ToString()을 할때는 exclude 속성을 사용하는게 좋다.

exclude는 해당 속성값으로 지정된 변수는 제외하기 때문에 지연로딩의 경우, 반드시 지정 해주는 것이 좋다.

